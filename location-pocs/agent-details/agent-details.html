<div ng-controller="DetailsController" layout='column' layout-align="" class="details-block-wrapper" md-whiteframe="6" ng-style="objStyleDetailHeightContent">
	<div class="agent-personal-data-wrapper" layout="column" flex="noshrink">
		<div class="data-contact-block" layout="row">
			<div class="avatar-wrapper" flex="20" layout="column">
				<img ng-src="{{agentDetails.profileImg ? agentDetails.profileImg : folderStructureUrl + 'src/images/myAvatar.png'}}" class="agent-avatar">
				<button class="location-helper no-border-no-outline" ng-click="showLocationsFn(agentDetails.lastLocations)">
					<span class="location-icon" ng-if="!showLocation">
						<svg fill="#4a90e2" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
						    <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
						    <path d="M0 0h24v24H0z" fill="none"/>
						</svg>
					</span>
					<span class="location-word" ng-if="!showLocation">
						Ubicar
					</span>
					<span class="location-icon" ng-if="showLocation">
						<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="22" viewBox="0 0 18 22">
						    <defs>
						        <path id="ab" d="M19 20H5V4h2v3h10V4h2v16zM12 2a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h4.184A2.992 2.992 0 0 1 12 0a2.99 2.99 0 0 1 2.816 2H19zM7 14v2h10v-2H7zm0-4v2h10v-2H7z"/>
						    </defs>
						    <g fill="none" fill-rule="evenodd" transform="translate(-3)">
						        <mask id="b" fill="#fff">
						            <use xlink:href="#a"/>
						        </mask>
						        <use fill="#4a90e2" xlink:href="#ab"/>
						    </g>
						</svg>
					</span>
					<span class="location-word long-word" ng-if="showLocation">
						Estadísticas
					</span>
				</button>
			</div>
			<div class="agent-data-list-wrapper" flex="75" flex-offset="5" flex="noshrink" layout="column" layout-align="space-between">
				<div class="agent-easy-data">
					<h3 class="agent-name">
						{{agentDetails.userName}}
					</h3>
					<p class="agent-id">
						Clave: {{agentDetails.userId}}
					</p>
				</div>
				<ul class="agent-contact-data">
					<li class="contact-itm">
						<span class="contact-icon">
							<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="16" viewBox="0 0 20 16">
							    <defs>
							        <path id="a" d="M18 0H2C.9 0 .01.9.01 2L0 14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V2c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V2l8 5 8-5v2z"/>
							    </defs>
							    <g fill="none" fill-rule="evenodd">
							        <mask id="b" fill="#fff">
							            <use xlink:href="#a"/>
							        </mask>
							        <use fill="#4a90e2" fill-rule="nonzero" xlink:href="#a"/>
							    </g>
							</svg>
						</span>
						<p class="contact-itm-value">
							{{agentDetails.cveEmail}}
						</p>
					</li>
					<li class="contact-itm">
						<span class="contact-icon">
							<svg fill="#4a90e2" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
							    <path d="M0 0h24v24H0z" fill="none"/>
							    <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
							</svg>
						</span>
						<p class="contact-itm-value">
							{{agentDetails.cellPhoneNumber || '(55) 4444-4444'}}
						</p>
					</li>
					<li class="contact-itm">
						<span class="contact-icon">
							<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="22" viewBox="0 0 14 22">
							    <defs>
							        <path id="ac" d="M12 .01L2 0C.9 0 0 .9 0 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V2c0-1.1-.9-1.99-2-1.99zM12 18H2V4h10v14z"/>
							    </defs>
							    <g fill="none" fill-rule="evenodd">
							        <mask id="b" fill="#fff">
							            <use xlink:href="#a"/>
							        </mask>
							        <use fill="#4a90e2" fill-rule="nonzero" xlink:href="#ac"/>
							    </g>
							</svg>
						</span>
						<p class="contact-itm-value">
							IMEI: {{agentDetails.imei}}
						</p>
					</li>
				</ul>
			</div>
		</div>

		<button class="message-sending no-border-no-outline" ng-click="openMessageDialog($event, agentDetails)" layout="row" layout-align="space-between">
			Enviar mensaje a {{agentDetails.userName.slice(0, agentDetails.userName.indexOf(' '))}}

			<span class="icon-model icon-mail"></span>
		</button>
	</div>

	<div class="agent-working-statics-wrapper" layout="column" flex="noshrink" ng-if="!showLocation">
		
		<div class="month-selector-wrapper" layout>
			<div class="select-text-leyend" flex="50">
				Ver rendimiento en:
			</div>
			<div class="select-container" flex="50">
				<md-select ng-model="workingMonth" class="md-select" placeholder="Mes de ...">
					<md-option ng-repeat="workMonth in availableMonths | orderBy: workMonth" ng-value="workMonth" ng-click="workingMonthSelection(workMonth)" ng-keyup="workingMonthSelection(workMonth)">
						{{workMonth.monthName}}
					</md-option>
                </md-select>
			</div>		
		</div>

		<div class="working-results-stats" layout="column">
			<h1 class="total-integrations-title" flex>
				{{totalIntegrations}} Integraciones registradas
			</h1>

			<div class="stats" layout flex>
				<div class="stats-canvas-wrapper" flex="40">
					<canvas id="doughnut" class="chart chart-doughnut" chart-colors="resultColors" chart-data="agentWorkStats" chart-labels="resultLabels"></canvas> 
				</div>
				<div class="stats-guide-wrapper" flex="40" flex-offset="10">
					<ul class="stats-meaning-list">
						<li class="stat-itm">
							<span class="result-color success"></span>
							<span class="result-text">Completados</span>
						</li>
						<li class="stat-itm">
							<span class="result-color not-starting"></span>
							<span class="result-text">Sin iniciar</span>
						</li>
						<li class="stat-itm">
							<span class="result-color pending"></span>
							<span class="result-text">Pendientes</span>
						</li>
					</ul>
				</div>
			</div>
		</div>

		<div class="integrations-selector-wrapper" flex>
			<md-select ng-model="integrationsToSee" class="md-select md-no-underline" placeholder="Integraciones" ng-change="visibleIntegrationsExposer(integrationsToSee)">
				<md-option ng-repeat="vOption in posibleIntegrations" ng-value="vOption.optionVal">
					{{vOption.text}}
				</md-option>
            </md-select>
		</div>

		<div class="filtered-integrations-wrapper" flex>
			<ul class="filtered-integrations-list">
				<li class="integration-itm" flex layout ng-repeat='integ in availableIntegrations | orderBy: "date" : filterOrder'>
					<div class="textCont" flex="90">
						<p class="integrated-person">
						{{integ.personName}}
						</p>
						<p class="integrations-date-details">
							Completada el {{integ.fullDate.getDate()}} de {{possibleMonths[integ.fullDate.getMonth()]}} a las {{integ.fullDate.getHours() +':'+ integ.fullDate.getMinutes() +':'+ integ.fullDate.getSeconds()}}
						</p>
					</div>
					<span flex="10" class="location-icon" ng-click="centerNow(integ)">
						<span class="icon-model icon-location-on"></span>
					</span>
				</li>
			</ul>
		</div>

	</div>

	<div class="agent-locations-wrapper" ng-if="showLocation">
		<div class="list-wrapper-element last-location-list">
			<div class="list-title">
				UBICACIÓN ACTUAL
			</div>
			<ul class="locations-list">
				<li class="location-itm actual-location" layout>
					<span class="location-idx" flex="15"></span>
					<div class="location-info-detail" flex="85">
						<p class="location-time-detail">
							Último registro: Hace 2 minutos
						</p>
						<p class="location-space-detail">
							{{(agentDetails.addressName) ? agentDetails.addressName : 'ningún lugar'}}
						</p>
					</div>
				</li>
			</ul>
		</div>

		<div class="list-wrapper-element">
			<div class="list-title">
				ÚLTIMAS 10 UBICACIONES
			</div>
			<ul class="locations-list">
				<li class="location-itm" ng-class="'complex-marker-attached-' + location.locationId" layout ng-repeat="location in agentDetails.lastLocations | orderBy: 'date' ">
					<span class="location-idx" flex="15">
						{{$index + 1}}
					</span>
					<div class="location-info-detail" flex="85">
						<p class="location-time-detail">
							{{location.timeTxt}}
						</p>
						<p class="location-space-detail">
							{{(location.addressName) ? location.addressName : 'ningún lugar'}}
						</p>
					</div>
				</li>
			</ul>
		</div>
		
	</div>

</div>